<!DOCTYPE html>
<html class="um landscape min-width-240px min-width-320px min-width-480px min-width-768px min-width-1024px">
    <head>
        <title></title>
        <meta charset="utf-8">
        <meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <link rel="stylesheet" href="css/fonts/font-awesome.min.css">
        <link rel="stylesheet" href="css/ui-box.css">
        <link rel="stylesheet" href="css/ui-base.css">
        <link rel="stylesheet" href="css/new_file.css">
        <link rel="stylesheet" href="css/ui-color.css">
        <link rel="stylesheet" href="css/appcan.control.css">
        <link rel="stylesheet" href="css/appcan.icon.css">
        <link rel="stylesheet" href="css/common.css">
    </head>
    <body class="um-vp " ontouchstart style="height:80%;">
        <div id="page_0" class="up ub ub-ver bc-bg" tabindex="0" style="height:80%;">
            <div id="header" class="uh bc-text-head ub oc_header">
                <div class="nav-btn" id="nav-left">
                    <div class="ub-img oback"></div>
                </div>
                <h1 class="ut ub-f1 ulev-3 ut-s tx-c" id="goTop" tabindex="0">政务</h1>
                <div class="nav-btn nav-bt" id="nav-right"></div>
            </div>
            <div id="goverment" class="ub ub-ac ubb c-66 govermentMenu">
                <!-- <div id="bszn" class="ub ub-f1 ub-pc ub-ac changeList">办事指南</div>
                <div id="zwrx" class="ub ub-f1 ub-pc ub-ac changeList">政务热线</div>
                <div id="gsgg" class="ub ub-f1 ub-pc ub-ac changeList">公示公告</div>
                <div id="zcfg" class="ub ub-f1 ub-pc ub-ac changeList">政策法规</div> -->
            </div>
            <div id="content" class="ub-f1 tx-l">
                
            </div>
        </div>
        <script src="js/appcan.js"></script>
        <script src="js/appcan.control.js"></script>
        <script src="js/common.js"></script>
    </body>
    <script>
        var govermentColumns=isDefine(getLocVal("govermentColumns"))?getLocVal("govermentColumns"):"";
        var governmentDom="";
        var preDomId="";
        appcan.ready(function() {
            console.log("政务栏目数据获取=====>");
            console.log(JSON.parse(govermentColumns));
            var titHeight = $('#header').offset().height;
            var navHeight = $('#goverment').offset().height;
            var govermentColumnsData=JSON.parse(govermentColumns);
            appcan.frame.open("content", "home_government_content.html", 0, titHeight+navHeight);
            
            for(index in govermentColumnsData.content){
                if(index==1){ //固定显示政务热线
                    governmentDom+='<div id="id_hotline" class="ub ub-f1 ub-pc ub-ac changeList">政务热线</div>';
                }
                governmentDom+='<div id="id_'+govermentColumnsData.content[index].columnId+'" class="ub ub-f1 ub-pc ub-ac '+((index==0)?'c-ff':'')+' changeList">'+govermentColumnsData.content[index].columnName+'</div>';
                
            }
            $("#goverment").html(governmentDom);
            preDomId='id_'+govermentColumnsData.content[0].columnId;
            //点击栏目
            appcan.button('.changeList','btn-act',function(){
                changList(this.id);
            })
            //侧栏跳转定位
            var govermentColumnDomIndex = isDefine(getLocVal("govermentColumnDomIndex"))?getLocVal("govermentColumnDomIndex"):"";
            if(isDefine(govermentColumnDomIndex)){
                isDefine(preDomId)?($("#"+preDomId).removeClass('c-ff')):"";
                $("#"+govermentColumnDomIndex).addClass('c-ff');
            }
        })
        
        function changList(domId){
            isDefine(preDomId)?($("#"+preDomId).removeClass('c-ff')):"";
            $("#"+domId).addClass('c-ff');
            if(domId=="id_hotline"){
                uexWindow.evaluatePopoverScript("", "content", "getHotLineChildColumn()");
            }else{
                uexWindow.evaluatePopoverScript("", "content", "showList("+domId.split('_')[1]+")");
            }
            preDomId=domId;
        }
        
        appcan.button("#nav-left", "btn-act", function() {
            setLocVal("govermentColumnIndex","");
            appcan.window.close(-1);
        })
         //双击回到顶部测试
        $("#goTop").on("doubleTap",function(){
            appcan.window.evaluatePopoverScript("","content","goTop()");
        })
    </script>
</html>